{% extends 'base.html' %}
{% block head %}
{% load static %}
{% endblock head %}

{% block content %}
{% include 'banner.html' %}
<!-- <div class="category-div"> -->
  <section class="category">
  {% if user.is_authenticated %}
    <i class="fas fa-bars category-open" onclick="categoryOpen()"></i>
  <ul class="category-ul">
    <div class="category-scroll">
      <i class="fas fa-times category-close" onclick="categoryClose()"></i>
    <li class="category-li">
      <a class="active" href="">전체보기</a>
    </li>
    {% for category in categories %}
    <li class="category-li">
      <a href="">{{category.name}}</a>
    </li>
    {% endfor %}
    {% for keyword in keywords %}
    <li class="category-li">
      <a href="">{{keyword.name}}</a>
    </li>
    {% endfor %}
    </div>
  </ul>
  {% else %}

  <p class="category-non-login"><i class="quote fas fa-quote-left"> </i> 로그인 하시면 관심있는 이슈를 기사별로 선택해서 보실 수 있어요 <i class="quote fas fa-quote-right"> </i></p>
  {% endif %}
</section>
<!-- </div> -->

{% if user.is_authenticated %}
<ul class="news-ul">
  {% for article in articles %}
  <li class="news-li">
    <div class="news-img"><img src="{{article.preview_img}}" alt="">
    </div>
    <a href="{% url 'news:detail' article.pk %}"><div class="news-contents">
      <div class="news-title">{{article.title}}</div>
      <div class="news-content">{{article.preview_content |truncatechars:150}}</div>
      <div class="news-social">
        <div class="news-infor">
        <span class="news-portal">{{article.potal.name}} · </span>
        <span class="news-press">{{article.press.name}} · </span>
        <span class="news-date">{{article.created_string}}</span>
      </div>
      <div class="news-social-infor">
        <span class="news-social-comment"><i class="fas fa-comment-alt"> </i> 12</span>
        <span class="news-social-like"><i class="fas fa-heart"> </i> 2</span>
      </div>
      </div>
    </div>
  </a>
  
  </li>
  {% endfor %}
</ul>
{% else %}
{% endif %}

<ul class="news-ul">
  {% for article in articles %}
  <li class="news-li">
    <div class="news-img"><img src="{{article.preview_img}}" alt="">
    </div>
    <a href="{% url 'news:detail' article.pk %}"><div class="news-contents">
      <div class="news-title">{{article.title}}</div>
      <div class="news-content">{{article.preview_content |truncatechars:150}}</div>
      <div class="news-social">
        <div class="news-infor">
        <span class="news-portal">{{article.potal.name}} · </span>
        <span class="news-press">{{article.press.name}} · </span>
        <span class="news-date">{{article.created_string}}</span>
      </div>
      <div class="news-social-infor">
        <span class="news-social-comment"><i class="fas fa-comment-alt"> </i> 12</span>
        <span class="news-social-like"><i class="fas fa-heart"> </i> 2</span>
      </div>
      </div>
    </div>
  </a>
  
  </li>
  {% endfor %}
</ul>
{% endblock content %}

{% block script %}
<script>
  document.querySelector('.category-ul').classList.add('category-close-ani')
function categoryClose(){
  document.querySelector('.category-ul').classList.add('category-close-ani')
  document.querySelector('.category-ul').classList.remove('category-open-ani')
}
function categoryOpen(){
  document.querySelector('.category-ul').classList.add('category-open-ani')
  document.querySelector('.category-ul').classList.remove('category-close-ani')
}

</script>
{% endblock script %}